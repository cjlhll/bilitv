# 收藏功能开发计划

## 1. 数据模型定义（Models.kt）
添加收藏夹相关的数据模型：
- `FavoriteFolder` - 收藏夹基本信息
- `FavoriteFolderResponse` - 收藏夹列表API响应
- `FavoriteFolderInfoResponse` - 收藏夹详情API响应
- `FavoriteMedia` - 收藏夹内的视频项
- `FavoriteMediaResponse` - 收藏夹内视频列表API响应

## 2. ViewModel创建（FavoriteViewModel.kt）
创建新的ViewModel管理收藏功能：
- `loadFavoriteFolders()` - 加载用户创建的所有收藏夹
- `loadFavoriteFolderContents(mediaId)` - 加载指定收藏夹内的视频列表
- 实现分页加载
- 实现状态管理（loading、error、hasMore）
- 实现滚动和焦点状态管理（继承VideoGridStateManager）

## 3. 枚举扩展（HomeScreen.kt）
在`UserTabType`枚举中添加：
- `FAVORITE("收藏")` - 新增收藏tab

## 4. UI组件开发（MainScreen.kt）
在`UserLoginScreen`中添加收藏tab的UI：
- 收藏夹列表视图（显示所有收藏夹）
- 收藏夹详情视图（显示文件夹内的视频）
- 支持点击收藏夹进入详情
- 支持从详情返回列表
- 使用CommonVideoGrid显示视频列表

## 5. API接口实现
根据B站API文档实现：
- `GET https://api.bilibili.com/x/v3/fav/folder/created/list-all` - 获取收藏夹列表
- `GET https://api.bilibili.com/x/v3/fav/folder/info` - 获取收藏夹元数据
- `GET https://api.bilibili.com/x/v3/fav/resource/list` - 获取收藏夹内视频列表（需要补充此API）

## 6. 状态管理
- 在MainScreen中添加FavoriteViewModel实例
- 管理收藏夹导航状态（列表/详情）
- 处理视频点击跳转到播放

## 7. 样式和交互
- 收藏夹卡片设计（显示封面、标题、数量）
- 视频列表复用CommonVideoGrid组件
- 焦点管理和滚动状态保持